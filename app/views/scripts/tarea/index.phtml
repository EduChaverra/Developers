<head>
    <title>Lista de Tareas</title>
</head>
<body class="bg-gray-100">
    <div class="container mx-auto p-4">
        <div class="bg-white p-6 rounded-lg shadow-lg">
            <h2 class="text-2xl font-bold mb-4">To Do</h2>
            <div class="mb-4">
                <button class="bg-green-500 text-white px-4 py-2 rounded" onclick="window.location.href='<?php echo WEB_ROOT?>/create'">+ Crear Nueva Tarea</button>
            </div>
            <!--<ul class="divide-y divide-gray-200">-->
                <!-- Ejemplo de tarea -->
                <!--<li class="py-4 flex justify-between items-center">-->
                    <!--<div>
                        <h3 class="text-lg font-bold">Nombre de la tarea</h3>
                        <p>Descripción de la tarea</p>
                    </div>-->
                      <?php
                        foreach($this->tareas as $tarea) :
                      ?>
                          <h3 class='text-lg font-bold'> <?= $tarea['titulo'];?> </h3>
                          <p> <?= $tarea['descripcion'];?> </p> 
                          <p> <?= $tarea['estado']; ?> </p>
                          <p> <?= $tarea['hora_inicio']; ?> </p>
                          <p> <?= $tarea['hora_fin']; ?> </p>
                          <p> <?= $tarea['usuario']; ?> </p>
                          <div class='flex space-x-2'>
                            <!--<form method="POST" action="show/<?= $tarea['id']?>">-->
                              <a href="show/<?=$tarea['id']?>">
                                <button class='bg-yellow-500 text-white px-4 py-2 rounded'>Editar</button>
                              </a>
                              <!--<input type="hidden" name="id" value="<?=$tarea['id']?>"/>-->
                            <!--</form>-->

                            <!--<form method="POST" action="delete/<?=$tarea['id']?>">-->
                              <button class='bg-red-500 text-white px-4 py-2 rounded' onclick="confirmDelete(<?=$tarea['id']?>)">Eliminar</button>
                              <!--<input type="hidden" name="id" id="<?=$tarea['id']?>"/>-->
                            <!--</form>-->
                          </div>
                      <?php endforeach;?>
                    <!--</div>
                </li>
                 Más tareas aquí 
            </ul>-->
        </div>
    </div>

    <script>
        async function confirmDelete(id) {
            if (confirm('¿Estás seguro que quieres eliminar esta tarea?')) {
              const formData = new FormData();
              formData.append("id", id);
              await fetch("delete/"+id, {
                  method: "POST",
                  body: formData,
              });
              window.location = "/"
            }
        }
    </script>
</body>
</html>